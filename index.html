<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Lucky Spin Widget</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    /* ---- –±–∞–∑–æ–≤—ã–π —Ñ–æ–Ω ---- */
    html,body{height:100%;margin:0;font-family:Roboto,sans-serif;background:#11082b;color:#eee;
              display:flex;flex-direction:column;align-items:center;justify-content:center;gap:22px}
    h3{font-size:26px;font-weight:700;text-shadow:0 0 10px #fff}

    /* ---- —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è ¬´—Å—Ç–µ–∫–ª—è–Ω–Ω–∞—è¬ª –ø–∞–Ω–µ–ª—å ---- */
    .panel{background:rgba(255,255,255,.05);backdrop-filter:blur(4px);
           border:1px solid rgba(255,255,255,.08);border-radius:18px;
           padding:24px 28px;box-shadow:0 0 18px #0006 inset}

    /* ---- –∫–Ω–æ–ø–∫–∏ / –≤–≤–æ–¥ ---- */
    .btn{background:#d400ff;border:none;border-radius:50px;padding:12px 46px;
         font-size:18px;font-weight:700;color:#fff;cursor:pointer}
    select,input[type=number]{background:#190f3d;border:2px solid #ffea00;border-radius:10px;
                               color:#ffea00;font-weight:700;padding:6px 10px}
    .game{display:none;flex-direction:column;align-items:center;gap:18px}
    .game.active{display:flex}

    /* –∫–æ–ª–µ—Å–æ */
    #canvas{background:#000;border-radius:50%;box-shadow:0 0 24px #ffea00 inset,0 0 30px #d400ff}
    .pointer{position:absolute;left:50%;top:-18px;transform:translateX(-50%);
             width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;
             border-top:28px solid #ffea00;filter:drop-shadow(0 0 6px #ffea00)}

    /* apple */
    #appleField{display:grid;grid-template-columns:repeat(5,60px);gap:10px}
    .cell{width:60px;height:60px;font-size:38px;border-radius:14px;display:flex;
          align-items:center;justify-content:center;background:#190f3d;cursor:pointer;
          box-shadow:0 0 4px #ffea00 inset}
    .cell.open{cursor:default}

    /* crash */
    #crashScreen{font-size:48px;font-weight:700;color:#ffea00;text-shadow:0 0 12px #ffea00}

    /* settings */
    #settingsPanel label{display:flex;flex-direction:column;font-size:14px;gap:4px}
    #saveStatus{font-size:14px;color:#0f0;display:none}
  </style>
</head>
<body>

  <h3>‚ú® Lucky Spin ‚ú®</h3>

  <!-- –≤—ã–±–æ—Ä –∏–≥—Ä—ã -->
  <select id="gameSelect" class="panel">
    <option value="wheel">üé° –ö–æ–ª–µ—Å–æ</option>
    <option value="apple">üçè Apple of Fortune</option>
    <option value="crash">üöÄ Crash</option>
  </select>

  <!-- ===== Wheel ===== -->
  <div id="wheelGame" class="game panel active">
    <div style="position:relative">
      <canvas id="canvas" width="320" height="320"></canvas>
      <div class="pointer"></div>
    </div>
  </div>

  <!-- ===== Apple ===== -->
  <div id="appleGame" class="game panel">
    <div>–ß–µ—Ä–≤—è–∫–∏: <select id="bombPick"></select></div>
    <div id="appleField"></div>
    <button id="appleCashBtn" class="btn" style="display:none">–ó–∞–±—Ä–∞—Ç—å √ó1.00</button>
  </div>

  <!-- ===== Crash ===== -->
  <div id="crashGame" class="game panel">
    <div id="crashScreen">x1.00</div>
    <button id="crashCashBtn" class="btn" style="display:none">–ó–∞–±—Ä–∞—Ç—å</button>
  </div>

  <!-- ===== –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–ø–æ–∫–∞–∂–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—É) ===== -->
  <div id="settingsPanel" class="panel" style="display:none;flex-direction:column;gap:14px;max-width:320px">
    <b>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω)</b>

    <label>–í–µ—Å —Å–µ–∫—Ç–æ—Ä–∞ 55√ó: <input id="w55" type="number" min="1"></label>
    <label>–î–æ–ø. —á–µ—Ä–≤—è–∫–∏ (appleRig): <input id="rig" type="number" min="0"></label>
    <label>Crash –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π X: <input id="cmax" type="number" step="0.1"></label>

    <button id="saveBtn" class="btn">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
    <span id="saveStatus">–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ ‚úì</span>
  </div>

  <!-- –±–∞–ª–∞–Ω—Å / —Å—Ç–∞–≤–∫–∞ -->
  <div id="infoWrap" class="panel">
    –ë–∞–ª–∞–Ω—Å: <span id="balance">‚Ä¶</span> ü™ô | 
    –°—Ç–∞–≤–∫–∞: <input id="stakeInp" type="number" min="1" value="1" style="width:70px"> ü™ô
  </div>

  <button id="actionBtn" class="btn">–ò–≥—Ä–∞—Ç—å!</button>

  <script src="gsap.min.js"></script>
  <script src="winwheel.min.js"></script>
  <script src="app.js?v=2"></script>
</body>
</html>
